!function(){"use strict";!function(){const e={PLAYER_HEALTH:50,PLAYER_SPEED:7,PLAYER_WIDTH:64,PLAYER_HEIGHT:64,SPRITE_WALK:"assets/game/player/walk.png",SPRITE_RUN:"assets/game/player/run.png",SPRITE_HURT:"assets/game/player/hurt.png",SPRITE_DEAD:"assets/game/player/dead.png",GAME_FRAME:0,SPRITE_FRAME:0,SPRITE_X:32,SPRITE_Y:32,SPRITE_POS_X:100,SPRITE_POS_Y:440,SOUND_HURT:"assets/music/effects/destroy.wav"},t=document.getElementById("bg-music"),s=new Audio(e.SOUND_HURT);s.volume=.1;class i{constructor(t,s){this.dimensions=t,this.health=e.PLAYER_HEALTH,this.spriteAnim={walk:e.SPRITE_WALK,run:e.SPRITE_RUN,attack:e.SPRITE_ATTACK,hurt:e.SPRITE_HURT,dead:e.SPRITE_DEAD},this.playerImg=new Image,this.playerImg.src=e.SPRITE_WALK,this.fps=s,this.frameTimer=0}walk(){this.playerImg.src=this.spriteAnim.walk,this.running=!1}run(){this.playerImg.src=this.spriteAnim.run,this.running=!0}hurt(){e.GAME_FRAME=1,t.muted||s.play(),this.playerImg.src=this.spriteAnim.hurt,this.health-=10,this.hurts=!0}dead(){e.GAME_FRAME=0,this.playerImg.src=this.spriteAnim.dead}draw(t,s){this.outOfHealth()&&this.position>=4||(this.hurts&&this.position>=4?(this.hurts=!1,this.running?this.run():this.walk()):this.frameTimer>this.fps?(this.position=Math.floor(e.GAME_FRAME/e.PLAYER_SPEED)%5,e.SPRITE_FRAME=e.SPRITE_X*this.position,e.GAME_FRAME++,this.frameTimer=0):this.frameTimer+=s),t.drawImage(this.playerImg,e.SPRITE_FRAME,0,e.SPRITE_X,e.SPRITE_Y,e.SPRITE_POS_X,e.SPRITE_POS_Y,e.PLAYER_WIDTH,e.PLAYER_HEIGHT)}outOfHealth(){return this.health<=0}bounds(){return{left:e.SPRITE_POS_X,right:e.SPRITE_POS_X+e.PLAYER_WIDTH,top:e.SPRITE_POS_Y,bottom:e.SPRITE_POS_Y+e.PLAYER_HEIGHT}}collidesWith(e,t){return e.right>t.left}}const h=["Mike is the best","Abbey is the best","Paulo is the best","I like sushi","destroy me","don't kill me","let me live T_T","yum lunch","let it rip","slime slime slime","what is love?","don't hurt me","Ew!","do or do not","roses are red","coding is cool","find the One Piece","drill pierce heavens!","ask salmon else","slime slime slime","krusty krab pizza","UwU","plus ultra","me hokage!","yer a wizard","slimes not limes","dedicate your heart","time stops for no one","yum yum","rise and slime","slime this","is purple blue?","are you a bully?","hike and brunch","don't mock me","slimes be sliming","it be like that","drink water","hello world","i am goo-tiful","stay gooey","you goo-fy","slime feelin' good","blue over pink","SQUISHY","squish this","WOW BUNNY","8==D","1, 2, 3","whatever","Who am I?","what am I?","I'm just filler","WOOHOO","snails have slime","I wanna digivolve.","smile","the very best","baby, don't hurt me","shake it off","keep calm","champagne","vanilla extract","Rose Water","2 + 2 = 5","brave new world","splendid slimes","gobble","come along with me","Come here.","crying in slime mart","wash your hands","boba is life","ball is life","octopus","puff puff","my back hurts","booty everywhere","bewbs","reincarnated as a","what in the isekai","a bus hit me","hark the herald","slimageddon","my slime academia","slimer moon","Slimeball Z","O_O"],n={ENEMY_SPEED:1,STAGGER_FRAME:10,ENEMY_WIDTH:64,ENEMY_HEIGHT:64,GAME_FRAME:0,SPRITE_FRAME:0,SPRITE_X:32,SPRITE_Y:25,SPRITE_POS_X:1152,SPRITE_POS_Y:445};class a{constructor(e,t,s,i,a,r){this.dimensions=e,this.speed=Math.floor(t*n.ENEMY_SPEED+n.ENEMY_SPEED),this.pos_x=Math.floor(n.SPRITE_POS_X+100*s),this.pos_y=0,this.stagger_frame=n.STAGGER_FRAME-this.speed,this.enemyImg=new Image,this.enemyImg.src="assets/game/enemy/slime.png",this.words=h[Math.floor(Math.random()*h.length)],this.words_y=n.SPRITE_POS_Y-150*Math.random(),this.score=this.words.length,this.destroyed=!1,this.checkWord(i),this.checkWordPosition(a),this.fps=r,this.maxFrame=60,this.frameTimer=0}checkWordPosition(e){if(void 0!==e)for(;e.includes(this.words_y);)this.words_y+=10}checkWord(e){if(void 0!==e)for(;e.includes(this.words);)this.words=h[Math.floor(Math.random()*h.length)]}draw(e,t){this.destroyed||(e.beginPath(),e.fillStyle="white",e.roundRect(this.pos_x-this.words.length-9,this.words_y-28,10*this.words.length+10,22,[10]),e.fill(),e.strokeStyle="gray",e.stroke(),e.fillStyle="black",e.font="24px VT323",e.fillText(this.words,this.pos_x-this.words.length,this.words_y-10)),this.move(e,t)}move(e,t){this.destroyed&&this.position>=6||(this.position=Math.floor(n.GAME_FRAME/this.stagger_frame)%7,n.SPRITE_FRAME=n.SPRITE_X*this.position,e.drawImage(this.enemyImg,n.SPRITE_FRAME,this.pos_y,n.SPRITE_X,n.SPRITE_Y,this.pos_x,n.SPRITE_POS_Y,n.ENEMY_WIDTH,n.ENEMY_HEIGHT)),this.frameTimer<this.fps?(n.GAME_FRAME++,this.pos_x-=this.speed/2.5,this.frameTimer=0):this.frameTimer+=t}destroy(){this.pos_y=2*n.SPRITE_Y,n.GAME_FRAME=1,this.destroyed=!0}bounds(){return{left:this.pos_x,right:this.pos_x+n.ENEMY_WIDTH,top:n.SPRITE_POS_Y,bottom:n.SPRITE_POS_Y+n.ENEMY_HEIGHT}}}const r={GAME_SPEED:.5,GAME_FRAME:0,SPEED_MODS:[0,.5,.7,.9],WIDTH:1152,HEIGHT:576};class o{constructor(e,t){this.ctx=e,this.bg=["assets/game/background/nature_2/1.png","assets/game/background/nature_2/2.png","assets/game/background/nature_5/3.png","assets/game/background/nature_5/4.png"],this.layers=[],this.fps=t;let s=0;this.bg.forEach((e=>{const t=new Image;t.src=e,this.layers.push(new m(t,this.ctx,r.SPEED_MODS[s],r.GAME_SPEED,this.fps)),s++}))}changeSpeed(e){this.layers.forEach((t=>{t.changeSpeed(e)}))}draw(e,t){this.layers.forEach((e=>{e.update(t),e.draw()}))}}class m{constructor(e,t,s,i,h){this.x=0,this.y=0,this.ctx=t,this.width=r.WIDTH,this.height=r.HEIGHT,this.img=e,this.speedMod=s,this.speed=i*this.speedMod,this.draw=this.draw.bind(this),this.frameTimer=0,this.fps=h}update(e){this.frameTimer>this.fps?(this.x=r.GAME_FRAME*this.speed%this.width,this.frameTimer=0,r.GAME_FRAME--):this.frameTimer+=e}changeSpeed(e){this.speed=e}draw(){this.ctx.drawImage(this.img,this.x,this.y,this.width,this.height),this.ctx.drawImage(this.img,this.x+this.width,this.y,this.width,this.height)}}const d=document.getElementById("title"),E=document.getElementById("start"),l=document.getElementById("bg-music"),c=new Image;c.src="assets/game/UI/hearts.png";const _={introBGMusic:"./assets/music/bg/memory.mp3",medBGMusic:"assets/music/bg/TemplePath.mp3",fastBGMusic:"./assets/music/bg/mountainoftrials.mp3",gameOverBGMusic:"./assets/music/bg/churchofsaints.mp3",enemyDestroyAudio:new Audio("./assets/music/effects/destroy2.wav"),gameOverAudio:new Audio("./assets/music/effects/game_over.mp3"),mistakeAudio:new Audio("assets/music/effects/mistake.wav")};_.enemyDestroyAudio.volume=.1,_.gameOverAudio.volume=.3,_.mistakeAudio.volume=.2;const u={HEART_SIZE:32,HEART_1_X:0,HEART_2_X:0,HEART_3_X:0,HEART_4_X:0,HEART_5_X:0,HEARTS_Y:0,HEARTS_POS_X:40,HEARTS_POS_Y:27,HEART_CANVAS_SIZE:64};class A{constructor(e){this.ctx=e.getContext("2d"),this.dimensions={width:e.width,height:e.height},this.bg=new o(this.ctx,2),this.player=new i(this.dimensions,2),this.enemy=new a(this.dimensions,2),this.enemiesData={enemies:[],enemyWords:[],enemyWordPos:[]},this.numEnemies=1,this.maxEnemies=3,this.score=0,this.typed="",this.difficultyChange=!1,this.level={med:!1,hard:!1}}run(){this.running=!1,l.src=_.introBGMusic,this.animate(0)}play(){this.running=!0,this.typed="",d.innerHTML="",E.innerHTML="",this.enemyInterval=setInterval(this.addEnemies.bind(this),800)}restart(){this.running=!1,Object.keys(this.enemiesData).forEach((e=>this.enemiesData[e]=[])),this.maxEnemies=4,this.numEnemies=1,this.enemy.frameTimer=0,clearInterval(this.enemyInterval),this.typed="",this.score=0,this.player.health=50,u.HEART_1_X=0,u.HEART_2_X=0,u.HEART_3_X=0,u.HEART_4_X=0,u.HEART_5_X=0,this.player.frameTimer=0,this.player.walk(),this.bg.changeSpeed(.5),this.bg.frameTimer=0,l.src=_.introBGMusic,Object.keys(this.level).forEach((e=>this.level[e]=!1)),d.innerHTML="typebit",E.innerHTML="press any key to start"}gameOver(){return this.player.outOfHealth()}changeDifficulty(){this.score>50?(this.maxEnemies=4,this.numEnemies=2):this.score>=100&&this.score<=150&&(this.maxEnemies=6,this.numEnemies=4),this.score>150&&this.score<=250?(this.maxEnemies=7,this.numEnemies=5,this.level.med||(l.src=_.medBGMusic,this.level.med=!0)):this.score>250&&this.score<=350?(this.maxEnemies=8,this.numEnemies=5,this.bg.changeSpeed(1),this.player.run(),this.level.hard||(l.src=_.fastBGMusic,this.level.hard=!0)):this.score>300&&this.score<=400?(this.maxEnemies=8,this.numEnemies=6):this.score>400&&(this.bg.changeSpeed(2),this.maxEnemies=10,this.numEnemies=6)}removeEnemy(e){const t=this.enemiesData.enemies.indexOf(e);this.enemiesData.enemies.splice(t,1),this.enemiesData.enemyWords.splice(t,1),this.enemiesData.enemyWordPos.splice(t,1)}animate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=(e-t)/1600;t=e,this.ctx.clearRect.bind(this,0,0,this.dimensions.width,this.dimensions.height),this.bg.draw(this.ctx,s),this.player.draw(this.ctx,s),this.gameOver()&&this.running&&(l.src=_.gameOverBGMusic,l.muted||_.gameOverAudio.play(),this.health(this.ctx),this.player.dead(),this.bg.changeSpeed(0),d.innerHTML="GAME OVER",E.innerHTML=`final score: ${this.score} <br>[ctrl] to restart`,clearInterval(this.enemyInterval),this.running=!1),this.changeDifficulty(),this.running&&(this.health(this.ctx),this.wordSubmit(),this.enemiesData.enemies.forEach((e=>{e.draw(this.ctx,s),e.bounds().right<0&&this.removeEnemy(e),this.player.collidesWith(this.player.bounds(),e.bounds())&&!1===e.destroyed&&(this.player.hurt(),this.removeEnemy(e))})),this.status(this.ctx)),this.animReq=requestAnimationFrame(this.animate.bind(this))}status(e){e.font="40px VT323",e.fillText(`score: ${this.score}`,960,70),e.font="64px VT323",e.fillText(this.typed,200,280)}addEnemies(){for(let e=0;e<this.numEnemies;e++)if(this.enemiesData.enemies.length<this.maxEnemies){let e=Math.random(),t=Math.random();const s=new a(this.dimensions,e,t,this.enemiesData.enemyWords,this.enemiesData.enemyWordPos,2);this.enemiesData.enemies.push(s),this.enemiesData.enemyWords.push(s.words),this.enemiesData.enemyWordPos.push(s.words_y)}}wordSubmit(){if("~"===this.typed.slice(-1)){if(this.typedWord=this.typed.slice(0,-1),this.enemiesData.enemyWords.includes(this.typedWord)){l.muted||_.enemyDestroyAudio.play();let e=this.enemiesData.enemyWords.indexOf(this.typedWord),t=this.enemiesData.enemies[e];t.destroy(),this.score+=t.score}else l.muted||_.mistakeAudio.play();this.typed=""}}health(e){this.player.health<10&&(u.HEART_1_X=64),e.drawImage(c,u.HEART_1_X,u.HEARTS_Y,u.HEART_SIZE,u.HEART_SIZE,u.HEARTS_POS_X,u.HEARTS_POS_Y,u.HEART_CANVAS_SIZE,u.HEART_CANVAS_SIZE),this.player.health<20&&(u.HEART_2_X=64),e.drawImage(c,u.HEART_2_X,u.HEARTS_Y,u.HEART_SIZE,u.HEART_SIZE,u.HEARTS_POS_X+u.HEART_CANVAS_SIZE,u.HEARTS_POS_Y,u.HEART_CANVAS_SIZE,u.HEART_CANVAS_SIZE),this.player.health<30&&(u.HEART_3_X=64),e.drawImage(c,u.HEART_3_X,u.HEARTS_Y,u.HEART_SIZE,u.HEART_SIZE,u.HEARTS_POS_X+2*u.HEART_CANVAS_SIZE,u.HEARTS_POS_Y,u.HEART_CANVAS_SIZE,u.HEART_CANVAS_SIZE),this.player.health<40&&(u.HEART_4_X=64),e.drawImage(c,u.HEART_4_X,u.HEARTS_Y,u.HEART_SIZE,u.HEART_SIZE,u.HEARTS_POS_X+3*u.HEART_CANVAS_SIZE,u.HEARTS_POS_Y,u.HEART_CANVAS_SIZE,u.HEART_CANVAS_SIZE),this.player.health<50&&(u.HEART_5_X=64),e.drawImage(c,u.HEART_5_X,u.HEARTS_Y,u.HEART_SIZE,u.HEART_SIZE,u.HEARTS_POS_X+4*u.HEART_CANVAS_SIZE,u.HEARTS_POS_Y,u.HEART_CANVAS_SIZE,u.HEART_CANVAS_SIZE)}}const p=document.getElementById("canvas"),T=document.getElementById("mobile-error"),y=document.getElementById("game-container"),g=document.getElementById("retry"),S=document.getElementById("bg-mute"),R=document.getElementById("bg-music"),I=["Tab","CapsLock","Alt","AltGraph","Fn","Super","Symbol","NumLock","Meta","Hyper","Shift","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Delete","Insert","PageUp","PageDown"];let f=!1;const w=e=>{e.preventDefault(),R.muted?(R.muted=!1,S.src="./assets/icons/speaker.png"):(R.muted=!0,S.src="./assets/icons/mute.png")};if(window.mobileCheck=function(){let e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{const t=matchMedia?.("(pointer:coarse)");if("(pointer:coarse)"===t?.media)e=!!t.matches;else if("orientation"in window)e=!0;else{const t=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(t)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(t)}}return e},window.mobileCheck()){y.remove(),T.textContent="sorry, typebit is not compatible with mobile devices 🥺 \r\n\r\n if you get this error on desktop, try disconnecting touch devices and restart";const e=new Image,t=new Image;e.src="../assets/nav/github.png",t.src="../assets/nav/linkedIn.png",e.onclick=function(){window.location.href="https://github.com/cubeydice/typebit"},t.onclick=function(){window.location.href="hhttps://www.linkedin.com/in/queen-belle-d-118b7859/"};const s=document.createElement("div");T.appendChild(s).appendChild(t),T.appendChild(s).appendChild(e)}else{const e=new A(p);e.run(),window.addEventListener("keydown",(function(t){f?I.includes(t.key)||("Backspace"===t.key?e.typed=e.typed.slice(0,-1):"Escape"===t.key?e.typed="":"Enter"===t.key?e.typed+="~":"Control"===t.key?e.restart():e.typed+=t.key):(e.play(),f=!0)}),!1);const t=t=>{t.preventDefault(),f=!1,e.restart()};g.addEventListener("click",t),S.addEventListener("click",w)}}()}();
//# sourceMappingURL=main.js.map